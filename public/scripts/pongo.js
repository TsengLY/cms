Pongo.UI={$body:$(document.body),$container:$(".wrapper"),$page:$("#page-panel"),$overlay:$("#overlay"),$form_group:$(".form-group"),$alert_box:$(".alert-msg"),$modal_box:$(".modal-box"),$btn_clicked:null,$api_url:null,$modal_url:null,btn_text:null,lang:null,timeout:1e3,loading_tpl:'<i class="icon-refresh icon-spin"></i> ',console:function(a){console.log(a)},debug:function(a){this.$page.html(a)},url:function(a){return Pongo.base+"/"+a},checkSpin:function(){return this.$btn_clicked.find("i").hasClass("icon-spin")},loadingBtn:function(){var a=this;this.submitBtn(),$("form .btn").on("click",function(b){if(b.preventDefault(),a.$alert_box.remove(),a.$btn_clicked||(a.$btn_clicked=$(this)),!a.checkSpin()){a.btn_text=a.$btn_clicked.html(),a.$btn_clicked.prepend(a.loading_tpl);var c=!a.$btn_clicked.hasClass("api"),d=!a.$btn_clicked.hasClass("confirm"),e=!a.$btn_clicked.hasClass("button");c&&d&&e&&setTimeout(function(){a.$btn_clicked.parents("form").submit()},a.timeout)}})},loadingIcoBtn:function(){var a=this;$(".btn.loading").on("click",function(){if(a.$btn_clicked=$(this),!a.checkSpin()){a.btn_text=a.$btn_clicked.html();var b=a.$btn_clicked.find("i");b.remove(),a.$btn_clicked.prepend(a.loading_tpl)}})},confirmForm:function(){var a=this;a.$modal_box.each(function(){var a=$(this).outerHeight()+10;$(this).css({top:-a})}),a.closeConfirm(),$(".confirm").on("click",function(b){b.preventDefault();var c=$(this);a.$modal_box=$(c.attr("href")),a.$modal_box.css({"z-index":2001}).addClass("open"),a.$body.addClass("open-modal")})},closeConfirm:function(){var a=this;$(".close-modal").on("click",function(b){b.preventDefault(),a.$modal_box.css({"z-index":0}).removeClass("open"),a.$body.removeClass("open-modal"),a.resetBtn()})},createAlertMessage:function(a){var b=this;b.$alert_box.remove();var c=$("<div/>").attr("class","alert-msg").addClass(a.status).html(a.msg);"expired"==a.type?window.location="/cms/login":(b.$alert_box=c,Modernizr.touch?(b.$alert_box.addClass("fixfixed"),b.$body.animate({scrollTop:0},0).prepend(c)):b.$body.prepend(c))},resetBtn:function(){this.btn_text&&this.$btn_clicked&&(this.$btn_clicked.html(this.btn_text),this.$btn_clicked=null)},saveForm:function(){var a=this;$(".api").on("click",function(b){b.preventDefault();var c=$(this),d=c.parents("form");a.$api_url=c.attr("href"),$.ajax({url:a.$api_url,type:"POST",data:d.serialize(),dataType:"json",context:a,success:a.validateForm}).done(function(){setTimeout(function(){a.resetBtn()},a.timeout)})})},submitBtn:function(){var a=this;$("form .btn[type=submit]").on("click",function(b){b.preventDefault(),a.$alert_box.remove(),$(this).parents("form").submit()})},validateForm:function(a){var b=this;this.$form_group.removeClass("has-error"),this.$form_group.find(".err").remove(),a.errors&&Pongo.Page.pageError(a.errors),a.page&&Pongo.Page.pageUpdate(a.page),b.createAlertMessage(a)}},$(function(){Pongo.UI.loadingBtn(),Pongo.UI.loadingIcoBtn(),Pongo.UI.saveForm(),Pongo.UI.confirmForm()});